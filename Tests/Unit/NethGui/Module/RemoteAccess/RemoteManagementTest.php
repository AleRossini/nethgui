<?php
/**
 * @package NethGuiFramework
 */

/**
 * Test class for NethGui_Module_RemoteAccess_RemoteManagement.
 * Generated by PHPUnit on 2011-03-16 at 15:53:04.
 *
 * @package NethGuiFramework
 * @subpackage Test
 */
class NethGui_Module_RemoteAccess_RemoteManagementTest extends ModuleTestCase
{

    protected function setUp()
    {
        parent::setUp();
        $this->object = new NethGui_Module_RemoteAccess_RemoteManagement();
    }

    public function testNoInput()
    {
        $this->moduleParameters = array();

        $this->expectedView = array(
            array('networkAddress' , '192.168.1.0'),
            array('networkMask' , '255.255.255.0'),
        );

        $this->expectedDb = array(
            array('configuration', self::DB_GET_PROP, array('httpd-admin', 'ValidFrom'),  '192.168.1.0/255.255.255.0,10.0.0.0/255.128.0.0'),
        );

        $this->runModuleTestProcedure();
    }

    public function testUpdate()
    {
        $this->moduleParameters = array(
            'networkAddress' => '192.168.1.2',
            'networkMask' => '255.255.128.0',
        );

        $this->expectedView = array(
            array('networkAddress' , '192.168.1.2'),
            array('networkMask' , '255.255.128.0'),
        );

        $this->expectedDb = array(
            array('configuration', self::DB_GET_PROP, array('httpd-admin', 'ValidFrom'),  '192.168.1.0/255.255.255.0,10.0.0.0/255.128.0.0'),
            array('configuration', self::DB_SET_PROP, array('httpd-admin', array('ValidFrom' =>  '192.168.1.2/255.255.128.0,10.0.0.0/255.128.0.0')), true),
        );

        $this->runModuleTestProcedure();
    }

    public function testDelete()
    {
        $this->moduleParameters = array(
            'networkAddress' => '',
            'networkMask' => '',
        );

        $this->expectedView = array(
            array('networkAddress' , ''),
            array('networkMask' , ''),
        );

        $this->expectedDb = array(
            array('configuration', self::DB_GET_PROP, array('httpd-admin', 'ValidFrom'),  '192.168.1.0/255.255.255.0,10.0.0.0/255.128.0.0'),
            array('configuration', self::DB_DEL_PROP, array('httpd-admin', array('ValidFrom')), true),
        );

        $this->runModuleTestProcedure();
    }

}

